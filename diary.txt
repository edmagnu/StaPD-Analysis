Looking for interesting data files.
In 'Documents\Data\Static Bulk Analysis' there is a 'Results.ipynb'.
In this notebook it loads data from '2016-09-22', '2016-09-23to27', '2016-09-27', '2016-09-28', '2016-10-01', 2016-10-04'
These are likely the data folders I'm looking for.
The notebook references each folder having an 'out.txt'. What's this?

In 'Documents\Data\2016-09-22'
'out.txt' is 19 lines of 4 floats each. The context is unclear.
'Results.ipynb' writes 'out.txt'.
It's a numpy array of 'fpulses', 'means', 'amps' and 'phases'.
How are these produced?

'fpulses' is read straight from a datafile, 'dscanmap.txt'
'dscanmap.txt' is a manually typed list of data files and the conditions of the data run.
It has the info [fnum (file number), DL-Pro (absolute DL-Pro frequency in GHz), DL-100 (same for DL-100), MW f (same for microwave frequency), attn (MW attenuation of variable attenuator, dB), fpulse (voltage pulse applied to vertical plate in mV)].
All delay scan files are listed.
So 'fpulses' is the static voltage pulse in mV applied to the top (or bottom) plate.

'means', 'phases' and 'amps' are produced by 'Results.ipynb'.
They are all set by 'delay_scan()', after which amp and phase are changed together so amp > 0 and phase is mod 1.
'delay_scan()' reads a delay data run.
First it zero corrects and averages.
Then it fits with 'fit_cos_3()'. A basic y = amp * cos(2*pi*(x-x0)) + y0
'amps' -> amp, 'phases' -> x0 and 'means' -> y0.
Note that the delay steps from the stage are translated to distance, and then divided by the MW wavelenght before being passed to the fit. So x0 is the phase in terms of wavelength offsets.

So we know that 'fpulses' describes the varied experimental condition, and 'amps', 'means' and 'phases' are the fit values.
This is all the information from inside a data set that we need for each data run.
'out.txt' should give all of the meaningful information from a data run.

Lets start on Git so I'm not tied to this computer.
Made a git repo StaPD-Analysis 'git init' and 'git add'
Used .gitignore to exclude '*.pdf'
Pushed to GitHub and cloned on laptop 'git push origin master'
'https://github.com/edmagnu/StaPD-Analysis.git'
Branching? I'll see when I get there.

Now that I have the data, I should look at metadata cleaning.
Focus on '#_delay.txt' files for now.
Necessary metadata:
	'date', 'dlpro', 'dl100', 'static', 'mwon', 'mwf', 'attn'
	Use 'other' to store the rest of the info in a long string.
Use '# key: metadata' format.

'Original Data' folders marked 'Read Only'
Will test metadata format on '2016-09-22\6_delay.txt'
'6_delay.txt' is reformatted. All comments are metadata, I can pick which ones to use.
'Analysis.py' is created. Imports metadata and data from '6_delay.txt' into DataFrame
For now I'll just try and read all files in the folder meeting the '#_delay.txt' format.
That means I have to reformat all the metadata

Metadata by hand would take 3min/file, 1 hour per folder.
I'll try to write something to do the heavy lifting.
'metadata_cleaner.py' does this.
I've been successful. All the metadata from "8_delay.txt" has been handled, and any extra gets stored in "Other".
"Filename", "Date", "Title", "DLPro", "DL100", "Static", "MWOn", "MWf", "Attn" are all essential, others are optional.

"metadata_cleaner()" did it's job. I ran it on these folders.
"2016-09-22", "2016-09-23", "2016-09-24", "2016-09-26", "2016-09-27", "2016-09-28", "2016-10-01", "2016-10-04"
I gave a quick quality control check, they look good.

Files all have trailing tabs, modifying 'metadata_cleaner()" to "line.strip()"
"flist_clean()" reads folders from "data_folders.txt" and cleans them.
Column labels fixed to be tab separated.
Tested with "read_tidy()", data loaded succesfully.

Now I need to read all data files into one big DataFrame.
First I aught to get a proper list of files.
Reads "data_folders.txt" to get the list of data folders.

All files in each folder gets read in.
This naturally produces errors when there are big typos.
I will add an editing step to "metadata_cleaner()" to fix typos.
I need to go error by error, and track down the right "fix."

"2016-09-27\20_delay.txt":
	Static is '15-00 mV Pulsed"
	This could be +/- 1500 mV
	According to "dscanmap.txt", it is +1500 mV
	"21_delay.txt" is -1500 mV
It looks like that's the only typo. For now.

I sould check that all of the important metadata is correct.
	Laser Frequency: Double check each day vs record
		Also check DL-Pro vs DL-100
	MW Frequency: Aught to be ~15930 MHz
	Static: Between -3000 and 3000 mV, good +/- coverage
	Attn: 53 - 10 dB
	MWOn: Should always be on for these data.